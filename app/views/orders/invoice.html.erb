<!DOCTYPE html>
<html>
<head>
  <title>Nota Fiscal</title>
  <style>
    /* Estilos básicos para a nota fiscal */
    body {
      font-family: sans-serif;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ccc;
    }
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    .details {
      margin-bottom: 20px;
    }
    .items {
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    .total {
      text-align: right;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Nota Fiscal</h1>
      <p><strong>Divino Prato</strong></p>
      <p>CNPJ: 36.245.378/0001-00</p>
      <p>Endereço: R. Antônio Losso, 737 - São Cristóvão, Guarapuava - PR, 85060260</p>
    </div>

    <div class="details">
      <p><strong>Dados do Cliente:</strong></p>
      <p>Nome: <%= @order.customer_name || "Não informado" %></p>
      <p>CPF: <%= @order.customer_cpf || "Não informado" %></p>
      <p>Data e Hora: <%= @order.created_at.strftime("%d/%m/%Y %H:%M") %></p>
      <p>Número do Pedido: <%= @order.id %></p>
      <%# Add payment method if available %>
    </div>

    <div class="items">
      <p><strong>Itens Consumidos:</strong></p>
      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Quantidade</th>
            <th>Preço Unitário</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <% @order.order_items.each do |order_item| %>
            <tr>
              <td><%= order_item.menu_item.name %></td>
              <td><%= order_item.quantity %></td>
              <td><%= number_to_currency(order_item.menu_item.price) %></td>
              <td><%= number_to_currency(order_item.total_price) %></td>
            </tr>
          <% end %>

          <% @order.dishes.each do |dish| %>
            <tr>
              <td>Prato por quilo (R$ <%= dish.price.to_f %>)</td>
              <td>Peso Variável</td>
              <td>Por Quilo</td>
              <td><%= number_to_currency(dish.price.to_f) %></td>
            </tr>
          <% end %>

          <tr>
            <td colspan="3" class="total"><strong>Total:</strong></td>
            <td class="total"><strong><%= number_to_currency(@order.total) %></strong></td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</body>
</html>
